
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Inruilwaarde Fietsen</title>

  <!-- PWA / Styles -->
  <link rel="manifest" href<meta name="theme-color" content="#0078D7">
  <link relcss
</head>

<body>

<!-- ===================================================
     INSTALLATIE-GATE
=================================================== -->
<script>
(function () {
  const STORAGE_KEY = "fsid_install_activated";
  const META_KEY = "fsid_install_meta";

  const INSTALL_CODES = [
    "FSID-25PW-FPW3-UT59","FSID-27RF-7UF4-W9UX","FSID-2KA9-QJ3H-EWGV",
    "FSID-2PN6-7MHC-3XH6","FSID-2VBW-GQJC-HS58","FSID-2VHD-DGPQ-Y36K",
    "FSID-35DK-AWBF-Z4YX","FSID-3DBP-79BJ-HNPF","FSID-3EQJ-W3TA-PMVX"
    // overige codes bewust ingekort â€“ voeg hier je volledige lijst terug
  ];

  let meta = null;
  try { meta = JSON.parse(localStorage.getItem(META_KEY) || "null"); } catch {}

  if (!meta || !meta.dealer || localStorage.getItem(STORAGE_KEY) !== "1") {
    document.body.innerHTML = `
      <main class="card" style="max-width:640px;margin:40px auto;font-family:system-ui">
        <h2>Installatie vereist</h2>
        <p>Deze applicatie vereist een jaarabonnement.</p>

        <label>Dealernaam
          <input id="dealer" style="width:100%;padding:10px;margin-top:6px">
        </label>

        <label style="margin-top:12px;display:block">Installatiecode
          <input id="code" style="width:100%;padding:10px;margin-top:6px">
        </label>

        <label style="margin-top:12px;display:block">
          <input type="checkbox" id="agree"> Ik ga akkoord met het jaarabonnement
        </label>

        <button id="activateBtn" style="margin-top:16px;padding:12px 18px;background:#0078D7;color:#fff;border-radius:6px">
          Activeer
        </button>

        <hr style="margin:20px 0;">
        <a id="requestLink" style="padding:10px 16px;background:#eee;border-radius:6px;text-decoration:none;">
          Installatiecode aanvragen
        </a>
      </main>
    `;

    const dealerInput = document.getElementById("dealer");
    const req = document.getElementById("requestLink");

    function updateMail() {
      const dealer = encodeURIComponent(dealerInput.value || "");
      req.href =
        "mailto:info@fietsserviceid.nl" +
        "?subject=" + encodeURIComponent("Aanvraag installatiecode Fiets Inruil Calculator") +
        "&body=" + encodeURIComponent(
          "Bedrijfsnaam: " + dealer + "\nContactpersoon:\nAdres:\nE-mail:\nTelefoon:"
        );
    }

    dealerInput.addEventListener("input", updateMail);
    updateMail();

    document.getElementById("activateBtn").onclick = function () {
      const dealer = dealerInput.value.trim();
      const code = document.getElementById("code").value.trim().toUpperCase();
      const agree = document.getElementById("agree").checked;

      if (!dealer || !agree || !INSTALL_CODES.includes(code)) {
        alert("Vul alle velden correct in.");
        return;
      }

      localStorage.setItem(META_KEY, JSON.stringify({ dealer, code, activatedAt: new Date().toISOString() }));
      localStorage.setItem(STORAGE_KEY, "1");
      location.reload();
    };

    return;
  }
})();
</script>

<!-- ===================================================
     UI
=================================================== -->
<header>
  <img src="./logofietsserviceidtransparant-ezgif.com-resize.png" alt="Fiets Service ID1>
</header>

<main>
  <section class="card">
    <h2>Invoer</h2>
    <div class="grid">
      <label>Type fiets <select id="typeSelect"></select></label>
