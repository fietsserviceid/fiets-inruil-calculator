
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inruilwaarde Fietsen</title>

  <!-- App meta -->
  ./manifest.webmanifest
  <meta name="theme-color" content="#0078D7">
  <link rel="stylesheet" href="./co + png (beide toegestaan) -->
  ./favicon.ico
  <link rel="icon" href="./icon-192.pngn voor de activatie-overlay layout -->
  <style>
    /* Licentie overlay */
    #licenseOverlay { position: fixed; inset: 0; background: rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; z-index: 9999; }
    #licenseCard { background:#fff; width:min(720px, 96vw); max-height:90vh; overflow:auto; border-radius:12px; border:1px solid #e6e6e6; padding:20px; box-shadow:0 6px 30px rgba(0,0,0,.2) }
    .tabbar { display:flex; gap:8px; margin-bottom:12px }
    .tabbar button { background:#f0f2f5; color:#111; border:1px solid #d0d7de; padding:8px 12px; border-radius:999px }
    .tabbar button.active { background:#0078D7; color:#fff; border-color:#0078D7 }
    .formgrid { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap:12px }
    .formgrid label { display:flex; flex-direction:column; gap:6px; font-weight:600 }
    .muted { color:#57606a; font-size:12px }
  </style>
</head>
<body>
<header>
  logofietsserviceidtransparant-ezgif.com-resize.png
  <h1>Inruilwaarde-calculator</h1>
  <div style="margin-left:auto; display:flex; gap:8px; align-items:center;">
    <small id="licenseBadge" class="muted">Licentie: niet geactiveerd</small>
    <button id="installBtn" hidden>Installeer app</button>
  </div>
</header>

<!-- Licentie overlay -->
<div id="licenseOverlay" role="dialog" aria-modal="true">
  <div id="licenseCard">
    <h2>Registratie & activatie</h2>
    <p class="muted">Activeer de app met een code of vraag een nieuwe installatiecode aan. Gebruik is pas mogelijk na activatie.</p>

    <div class="tabbar">
      <button id="tabActivate" class="active" type="button">Activeren</button>
      <button id="tabRequest" type="button">Aanvragen</button>
    </div>

    <div id="panelActivate">
      <label>Activatiecode
        <input id="activationCodeInput" placeholder="Voer activatiecode in" />
      </label>
      <div class="actions" style="margin-top:10px; display:flex; gap:8px; align-items:center;">
        <button id="btnActivate">Activeer</button>
        <span id="activateMsg" class="muted"></span>
      </div>
    </div>

    <div id="panelRequest" style="display:none;">
      <div class="formgrid">
        <label>Bedrijfsnaam<input id="orgName"/></label>
        <label>KVK-nummer (optioneel)<input id="kvk"/></label>
        <label>Contactpersoon<input id="contactName"/></label>
        <label>E-mailadres<input id="email" type="email"/></label>
        <label>Telefoon<input id="phone"/></label>
        <label>Straat + nr<input id="street"/></label>
        <label>Postcode<input id="zip"/></label>
        <label>Plaats<input id="city"/></label>
      </div>
      <div class="actions" style="margin-top:10px; display:flex; gap:8px; align-items:center;">
        <button id="btnRequest">Vraag installatiecode aan</button>
        <span id="requestMsg" class="muted"></span>
      </div>
      <p class="muted">Klik op "Vraag installatiecode aan" om je e‑mailprogramma te openen met een voorgedefinieerde e‑mail (NAW-gegevens).</p>
    </div>
  </div>
</div>

<main>
  <section class="card">
    <h2>Invoer</h2>
    <div class="grid">
      <label>Type fiets
        <select id="typeSelect"></select>
      </label>
      <label>Merk
        <select id="brandSelect"></select>
      </label>
      <label>Staat
        <select id="stateSelect"></select>
      </label>
      <label id="accuStateWrap">Accustaat
        <select id="accuStateSelect"></select>
      </label>
      <label>Heeft accu?
        <select id="hasAccuSelect">
          <option value="auto" selected>Automatisch (per type)</option>
          <option value="ja">Ja</option>
          <option value="nee">Nee</option>
        </select>
      </label>
      <label>Leeftijd (0–15 jaar)
        <input id="ageInput" type="number" min="0" max="15" value="5" />
      </label>
      <label>Nieuwprijs / Aanschafprijs (€)
        <input id="priceInput" type="number" min="0" step="1" placeholder="Laat leeg voor referentieprijs" />
      </label>
      <div class="hint" id="refPriceHint"></div>
    </div>
    <button id="calcBtn">Bereken inruilwaarde</button>
  </section>

  <section class="card" id="resultCard" hidden>
    <h2>Resultaat</h2>
    <div class="result-line"><span>Inruilwaarde</span><strong><span id="resultValue">€ 0</span></strong></div>
    <details>
      <summary>Toelichting en factoren</summary>
      <ul>
        <li>Leeftijdsfactor: <span id="factorAge"></span></li>
        <li>Conditiefactor: <span id="factorState"></span></li>
        <li>Accufactor: <span id="factorAccu"></span></li>
        <li>Merkfactor: <span id="factorBrand"></span></li>
      </ul>
    </details>
    <div class="actions">
      <button id="printOfferBtn">Maak offerte (print/pdf)</button>
    </div>
  </section>

  <section class="card" id="offerCard">
    <h2>Offerte – Inruilvoorstel</h2>
    <div class="offer-grid">
      <label>Naam Klant: <input id="offerName" placeholder="Naam klant"></label>
      <div class="kv">
        <div>Type fiets:</div><div id="offerType"></div>
        <div>Merk:</div><div id="offerBrand"></div>
        <div>Staat:</div><div id="offerState"></div>
        <div>Leeftijd:</div><div id="offerAge"></div>
      </div>
      <div class="offer-total">Inruilprijs: <strong id="offerTotal">€ 0</strong></div>
      <p class="small">
        Deze inruilwaarde is tot stand gekomen op basis van type fiets, leeftijd en algemene staat.
        Dit voorstel is indicatief en onder voorbehoud van fysieke inspectie.
      </p>
      <div class="kv">
        <div>Datum:</div><div id="offerDate"></div>
      </div>
      <div class="signatures">
        <div>Handtekening klant: _________________________________</div>
        <div>Handtekening dealer: _________________________________</div>
      </div>
      <div class="actions no-print"><button onclick="window.print()">Print / Exporteer PDF</button></div>
    </div>
  </section>
</main>

<footer>
  <small>© <span id="year"></span> Inruilwaarde Fietsen By FsiD BV</small><br>
  <small style="font-size: 11px; color: #666;">
    Disclaimer: Fiets Service ID is niet aansprakelijk voor de weergegeven inruilprijs.
    Alle getoonde waarden zijn indicatief. De uiteindelijke inruilprijs wordt uitsluitend bepaald door de dealer.
  </small>
</footer>

<!-- >>> Belangrijk: laadvólgorde scripts + cache-busters <<< -->
./license_codes.js?v=20260124-3</script>
<scriptse_mailto_naw.js?v=20260124-3</script>
./app.js?v=20260124-3</script>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js');
    });
  }
</script>
</body>
</html>
